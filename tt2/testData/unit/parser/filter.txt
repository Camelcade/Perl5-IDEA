Subtree: HTML (HTML)
HtmlFile:filter.tt
  PsiElement(HTML_DOCUMENT)
    PsiElement(XML_PROLOG)
      <empty list>
    HtmlTag:html
      XmlToken:XML_START_TAG_START('<')
      XmlToken:XML_NAME('html')
      XmlToken:XML_TAG_END('>')
      XmlText
      HtmlTag:head
        XmlToken:XML_START_TAG_START('<')
        XmlToken:XML_NAME('head')
        XmlToken:XML_TAG_END('>')
        XmlText
          XmlToken:XML_DATA_CHARACTERS('http://template-toolkit.org/docs/manual/Variables.html')
        XmlToken:XML_END_TAG_START('</')
        XmlToken:XML_NAME('head')
        XmlToken:XML_TAG_END('>')
      XmlText
      HtmlTag:body
        XmlToken:XML_START_TAG_START('<')
        XmlToken:XML_NAME('body')
        XmlToken:XML_TAG_END('>')
        XmlText
          PsiElement(TT2: TT2_OUTER)('[% FILTER html %]')
          XmlToken:XML_DATA_CHARACTERS('HTML')
          XmlToken:XML_DATA_CHARACTERS('text')
          XmlToken:XML_DATA_CHARACTERS('may')
          XmlToken:XML_DATA_CHARACTERS('have')
          XmlToken:XML_DATA_CHARACTERS('<')
          XmlToken:XML_DATA_CHARACTERS('and')
          XmlToken:XML_DATA_CHARACTERS('>')
          XmlToken:XML_DATA_CHARACTERS('characters')
          XmlToken:XML_DATA_CHARACTERS('embedded')
          XmlToken:XML_DATA_CHARACTERS('which')
          XmlToken:XML_DATA_CHARACTERS('you')
          XmlToken:XML_DATA_CHARACTERS('want')
          XmlToken:XML_DATA_CHARACTERS('converted')
          XmlToken:XML_DATA_CHARACTERS('to')
          XmlToken:XML_DATA_CHARACTERS('the')
          XmlToken:XML_DATA_CHARACTERS('correct')
          XmlToken:XML_DATA_CHARACTERS('HTML')
          XmlToken:XML_DATA_CHARACTERS('entities.')
          PsiElement(TT2: TT2_OUTER)('[% END %]\n\n[% FILTER repeat(3) %]')
          XmlToken:XML_DATA_CHARACTERS('blah')
          PsiElement(TT2: TT2_OUTER)('[% END %]\n\n[% FILTER echo = repeat(2) %]')
          XmlToken:XML_DATA_CHARACTERS('Is')
          XmlToken:XML_DATA_CHARACTERS('there')
          XmlToken:XML_DATA_CHARACTERS('anybody')
          XmlToken:XML_DATA_CHARACTERS('out')
          XmlToken:XML_DATA_CHARACTERS('there?')
          PsiElement(TT2: TT2_OUTER)('[% END %]\n\n[% FILTER echo %]')
          XmlToken:XML_DATA_CHARACTERS('Mother,')
          XmlToken:XML_DATA_CHARACTERS('should')
          XmlToken:XML_DATA_CHARACTERS('I')
          XmlToken:XML_DATA_CHARACTERS('build')
          XmlToken:XML_DATA_CHARACTERS('a')
          XmlToken:XML_DATA_CHARACTERS('wall?')
          PsiElement(TT2: TT2_OUTER)('[% END %]\n\n[% myfilter = 'html' %]\n[% FILTER $myfilter %]')
          XmlToken:XML_DATA_CHARACTERS('...')
          PsiElement(TT2: TT2_OUTER)('[% END %]')
        XmlToken:XML_END_TAG_START('</')
        XmlToken:XML_NAME('body')
        XmlToken:XML_TAG_END('>')
      XmlText
      XmlToken:XML_END_TAG_START('</')
      XmlToken:XML_NAME('html')
      XmlToken:XML_TAG_END('>')
--------------------------------------------------------------------------------
Subtree: Template Toolkit 2 (Template Toolkit 2)
Template Toolkit File
  PsiComment(TT2: TT2_HTML)('<html>\n<head>http://template-toolkit.org/docs/manual/Variables.html</head>\n<body>\n\n')
  PsiComment(TT2: [%)('[%')
  PsiFilterBlockImpl(TT2: FILTER_BLOCK)
    PsiFilterDirectiveImpl(TT2: FILTER_DIRECTIVE)
      PsiElement(TT2: FILTER)('FILTER')
      PsiIdentifierExprImpl(TT2: IDENTIFIER_EXPR)
        PsiElement(TT2: TT2_IDENTIFIER)('html')
    PsiComment(TT2: %])('%]')
    PsiComment(TT2: TT2_HTML)('\n   HTML text may have < and > characters embedded\n   which you want converted to the correct HTML entities.\n')
    PsiComment(TT2: [%)('[%')
    PsiEndDirectiveImpl(TT2: END_DIRECTIVE)
      PsiElement(TT2: END)('END')
  PsiComment(TT2: %])('%]')
  PsiComment(TT2: [%)('[%')
  PsiFilterBlockImpl(TT2: FILTER_BLOCK)
    PsiFilterDirectiveImpl(TT2: FILTER_DIRECTIVE)
      PsiElement(TT2: FILTER)('FILTER')
      PsiCallExprImpl(TT2: CALL_EXPR)
        PsiElement(TT2: TT2_IDENTIFIER)('repeat')
        PsiCallArgumentsImpl(TT2: CALL_ARGUMENTS)
          PsiElement(TT2: ()('(')
          PsiTermExprImpl(TT2: TERM_EXPR)
            PsiElement(TT2: TT2_NUMBER_SIMPLE)('3')
          PsiElement(TT2: ))(')')
    PsiComment(TT2: %])('%]')
    PsiComment(TT2: TT2_HTML)('blah ')
    PsiComment(TT2: [%)('[%')
    PsiEndDirectiveImpl(TT2: END_DIRECTIVE)
      PsiElement(TT2: END)('END')
  PsiComment(TT2: %])('%]')
  PsiComment(TT2: [%)('[%')
  PsiFilterBlockImpl(TT2: FILTER_BLOCK)
    PsiFilterDirectiveImpl(TT2: FILTER_DIRECTIVE)
      PsiElement(TT2: FILTER)('FILTER')
      PsiAssignExprImpl(TT2: ASSIGN_EXPR)
        PsiIdentifierExprImpl(TT2: IDENTIFIER_EXPR)
          PsiElement(TT2: TT2_IDENTIFIER)('echo')
        PsiElement(TT2: =)('=')
        PsiCallExprImpl(TT2: CALL_EXPR)
          PsiElement(TT2: TT2_IDENTIFIER)('repeat')
          PsiCallArgumentsImpl(TT2: CALL_ARGUMENTS)
            PsiElement(TT2: ()('(')
            PsiTermExprImpl(TT2: TERM_EXPR)
              PsiElement(TT2: TT2_NUMBER_SIMPLE)('2')
            PsiElement(TT2: ))(')')
    PsiComment(TT2: %])('%]')
    PsiComment(TT2: TT2_HTML)('\nIs there anybody out there?\n')
    PsiComment(TT2: [%)('[%')
    PsiEndDirectiveImpl(TT2: END_DIRECTIVE)
      PsiElement(TT2: END)('END')
  PsiComment(TT2: %])('%]')
  PsiComment(TT2: [%)('[%')
  PsiFilterBlockImpl(TT2: FILTER_BLOCK)
    PsiFilterDirectiveImpl(TT2: FILTER_DIRECTIVE)
      PsiElement(TT2: FILTER)('FILTER')
      PsiIdentifierExprImpl(TT2: IDENTIFIER_EXPR)
        PsiElement(TT2: TT2_IDENTIFIER)('echo')
    PsiComment(TT2: %])('%]')
    PsiComment(TT2: TT2_HTML)('\nMother, should I build a wall?\n')
    PsiComment(TT2: [%)('[%')
    PsiEndDirectiveImpl(TT2: END_DIRECTIVE)
      PsiElement(TT2: END)('END')
  PsiComment(TT2: %])('%]')
  PsiComment(TT2: [%)('[%')
  PsiAssignExprImpl(TT2: ASSIGN_EXPR)
    PsiIdentifierExprImpl(TT2: IDENTIFIER_EXPR)
      PsiElement(TT2: TT2_IDENTIFIER)('myfilter')
    PsiElement(TT2: =)('=')
    PsiSqStringExprImpl(TT2: SQ_STRING_EXPR)
      PsiElement(TT2: SQ_OPEN)(''')
      PsiElement(TT2: STRING_CONTENT)('html')
      PsiElement(TT2: SQ_CLOSE)(''')
  PsiComment(TT2: %])('%]')
  PsiComment(TT2: [%)('[%')
  PsiFilterBlockImpl(TT2: FILTER_BLOCK)
    PsiFilterDirectiveImpl(TT2: FILTER_DIRECTIVE)
      PsiElement(TT2: FILTER)('FILTER')
      PsiVariableExprImpl(TT2: VARIABLE_EXPR)
        PsiElement(TT2: $)('$')
        PsiElement(TT2: TT2_IDENTIFIER)('myfilter')
    PsiComment(TT2: %])('%]')
    PsiComment(TT2: TT2_HTML)('\n   ...\n')
    PsiComment(TT2: [%)('[%')
    PsiEndDirectiveImpl(TT2: END_DIRECTIVE)
      PsiElement(TT2: END)('END')
  PsiComment(TT2: %])('%]')
  PsiComment(TT2: TT2_HTML)('\n\n\n\n</body>\n</html>')
--------------------------------------------------------------------------------
