Subtree: HTML (HTML)
HtmlFile:init.mas
  PsiElement(HTML_DOCUMENT)
    PsiElement(XML_PROLOG)
      <empty list>
    HtmlTag:html
      XmlToken:XML_START_TAG_START('<')
      XmlToken:XML_NAME('html')
      XmlToken:XML_TAG_END('>')
      PsiElement(HTML::Mason: HTML_MASON_OUTER_ELEMENT_TYPE)('\n\n<%init>\n# Fetch article from database\n    my $dbh = DBI::connect;\n    my $sth = $dbh->prepare("select * from articles where id = ?");\n    $sth->execute($article_id);\n    my ($headline, $date, $author, $body) = $sth->fetchrow_array;\n    # Massage the fields\n    $headline = uc($headline);\n    my ($year, $month, $day) = split('-', $date);\n    $date = "$month/$day";\n</%init>\n\n<%init>\nmy $ua = $r->header_in('User-Agent');\n    return ($ua =~ /Mozilla/i && $ua !~ /MSIE/i) ? 1 : 0;\n</%init>\n\n')
      XmlToken:XML_END_TAG_START('</')
      XmlToken:XML_NAME('html')
      XmlToken:XML_TAG_END('>')
--------------------------------------------------------------------------------
Subtree: HTML::Mason Templating Language (HTML::Mason Templating Language)
HTML::Mason component
  PsiComment(HTML::Mason: HTML_MASON_TEMPLATE_BLOCK_HTML)('<html>')
  HTMLMasonInitBlockImpl(HTML::Mason: HTML_MASON_INIT_BLOCK)
    PsiElement(HTML::Mason: <%init>)('<%init>')
    PsiComment(Perl5: COMMENT_LINE)('# Fetch article from database')
    PsiPerlStatementImpl(Perl5: STATEMENT)
      PsiPerlAssignExprImpl(Perl5: ASSIGN_EXPR)
        PsiPerlVariableDeclarationLexicalImpl(Perl5: VARIABLE_DECLARATION_LEXICAL)
          PsiElement(Perl5: my)('my')
          PsiPerlVariableDeclarationElementImpl(VARIABLE_DECLARATION_ELEMENT)
            PsiPerlScalarVariableImpl(Perl5: SCALAR_VARIABLE)
              PsiElement(Perl5: $$)('$')
              PerlVariableNameElementImpl(Perl5: SCALAR_NAME)('dbh')
        PsiElement(Perl5: =)('=')
        PsiPerlSubCallExprImpl(Perl5: SUB_CALL_EXPR)
          PsiPerlMethodImpl(Perl5: METHOD)
            PerlNamespaceElementImpl(Perl5: package::name::)('DBI::')
            PerlSubNameElementImpl(Perl5: subname)('connect')
      PsiElement(Perl5: ;)(';')
    PsiPerlStatementImpl(Perl5: STATEMENT)
      PsiPerlAssignExprImpl(Perl5: ASSIGN_EXPR)
        PsiPerlVariableDeclarationLexicalImpl(Perl5: VARIABLE_DECLARATION_LEXICAL)
          PsiElement(Perl5: my)('my')
          PsiPerlVariableDeclarationElementImpl(VARIABLE_DECLARATION_ELEMENT)
            PsiPerlScalarVariableImpl(Perl5: SCALAR_VARIABLE)
              PsiElement(Perl5: $$)('$')
              PerlVariableNameElementImpl(Perl5: SCALAR_NAME)('sth')
        PsiElement(Perl5: =)('=')
        PsiPerlDerefExprImpl(Perl5: DEREF_EXPR)
          PsiPerlScalarVariableImpl(Perl5: SCALAR_VARIABLE)
            PsiElement(Perl5: $$)('$')
            PerlVariableNameElementImpl(Perl5: SCALAR_NAME)('dbh')
          PsiElement(Perl5: ->)('->')
          PsiPerlNestedCallImpl(Perl5: NESTED_CALL)
            PsiPerlMethodImpl(Perl5: METHOD)
              PerlSubNameElementImpl(Perl5: subname)('prepare')
            PsiPerlParenthesisedCallArgumentsImpl(Perl5: PARENTHESISED_CALL_ARGUMENTS)
              PsiElement(Perl5: ()('(')
              PsiPerlStringDqImpl(Perl5: STRING_DQ)
                PsiElement(Perl5: QUOTE_DOUBLE_OPEN)('"')
                PerlStringContentElementImpl(Perl5: STRING_CONTENT_QQ)('select * from articles where id = ?')
                PsiElement(Perl5: QUOTE_DOUBLE_CLOSE)('"')
              PsiElement(Perl5: ))(')')
      PsiElement(Perl5: ;)(';')
    PsiPerlStatementImpl(Perl5: STATEMENT)
      PsiPerlDerefExprImpl(Perl5: DEREF_EXPR)
        PsiPerlScalarVariableImpl(Perl5: SCALAR_VARIABLE)
          PsiElement(Perl5: $$)('$')
          PerlVariableNameElementImpl(Perl5: SCALAR_NAME)('sth')
        PsiElement(Perl5: ->)('->')
        PsiPerlNestedCallImpl(Perl5: NESTED_CALL)
          PsiPerlMethodImpl(Perl5: METHOD)
            PerlSubNameElementImpl(Perl5: subname)('execute')
          PsiPerlParenthesisedCallArgumentsImpl(Perl5: PARENTHESISED_CALL_ARGUMENTS)
            PsiElement(Perl5: ()('(')
            PsiPerlScalarVariableImpl(Perl5: SCALAR_VARIABLE)
              PsiElement(Perl5: $$)('$')
              PerlVariableNameElementImpl(Perl5: SCALAR_NAME)('article_id')
            PsiElement(Perl5: ))(')')
      PsiElement(Perl5: ;)(';')
    PsiPerlStatementImpl(Perl5: STATEMENT)
      PsiPerlAssignExprImpl(Perl5: ASSIGN_EXPR)
        PsiPerlVariableDeclarationLexicalImpl(Perl5: VARIABLE_DECLARATION_LEXICAL)
          PsiElement(Perl5: my)('my')
          PsiElement(Perl5: ()('(')
          PsiPerlVariableDeclarationElementImpl(VARIABLE_DECLARATION_ELEMENT)
            PsiPerlScalarVariableImpl(Perl5: SCALAR_VARIABLE)
              PsiElement(Perl5: $$)('$')
              PerlVariableNameElementImpl(Perl5: SCALAR_NAME)('headline')
          PsiElement(Perl5: ,)(',')
          PsiPerlVariableDeclarationElementImpl(VARIABLE_DECLARATION_ELEMENT)
            PsiPerlScalarVariableImpl(Perl5: SCALAR_VARIABLE)
              PsiElement(Perl5: $$)('$')
              PerlVariableNameElementImpl(Perl5: SCALAR_NAME)('date')
          PsiElement(Perl5: ,)(',')
          PsiPerlVariableDeclarationElementImpl(VARIABLE_DECLARATION_ELEMENT)
            PsiPerlScalarVariableImpl(Perl5: SCALAR_VARIABLE)
              PsiElement(Perl5: $$)('$')
              PerlVariableNameElementImpl(Perl5: SCALAR_NAME)('author')
          PsiElement(Perl5: ,)(',')
          PsiPerlVariableDeclarationElementImpl(VARIABLE_DECLARATION_ELEMENT)
            PsiPerlScalarVariableImpl(Perl5: SCALAR_VARIABLE)
              PsiElement(Perl5: $$)('$')
              PerlVariableNameElementImpl(Perl5: SCALAR_NAME)('body')
          PsiElement(Perl5: ))(')')
        PsiElement(Perl5: =)('=')
        PsiPerlDerefExprImpl(Perl5: DEREF_EXPR)
          PsiPerlScalarVariableImpl(Perl5: SCALAR_VARIABLE)
            PsiElement(Perl5: $$)('$')
            PerlVariableNameElementImpl(Perl5: SCALAR_NAME)('sth')
          PsiElement(Perl5: ->)('->')
          PsiPerlNestedCallImpl(Perl5: NESTED_CALL)
            PsiPerlMethodImpl(Perl5: METHOD)
              PerlSubNameElementImpl(Perl5: subname)('fetchrow_array')
      PsiElement(Perl5: ;)(';')
    PsiComment(Perl5: COMMENT_LINE)('# Massage the fields')
    PsiPerlStatementImpl(Perl5: STATEMENT)
      PsiPerlAssignExprImpl(Perl5: ASSIGN_EXPR)
        PsiPerlScalarVariableImpl(Perl5: SCALAR_VARIABLE)
          PsiElement(Perl5: $$)('$')
          PerlVariableNameElementImpl(Perl5: SCALAR_NAME)('headline')
        PsiElement(Perl5: =)('=')
        PsiPerlSubCallExprImpl(Perl5: SUB_CALL_EXPR)
          PsiPerlMethodImpl(Perl5: METHOD)
            PerlSubNameElementImpl(Perl5: unary)('uc')
          PsiPerlParenthesisedCallArgumentsImpl(Perl5: PARENTHESISED_CALL_ARGUMENTS)
            PsiElement(Perl5: ()('(')
            PsiPerlScalarVariableImpl(Perl5: SCALAR_VARIABLE)
              PsiElement(Perl5: $$)('$')
              PerlVariableNameElementImpl(Perl5: SCALAR_NAME)('headline')
            PsiElement(Perl5: ))(')')
      PsiElement(Perl5: ;)(';')
    PsiPerlStatementImpl(Perl5: STATEMENT)
      PsiPerlAssignExprImpl(Perl5: ASSIGN_EXPR)
        PsiPerlVariableDeclarationLexicalImpl(Perl5: VARIABLE_DECLARATION_LEXICAL)
          PsiElement(Perl5: my)('my')
          PsiElement(Perl5: ()('(')
          PsiPerlVariableDeclarationElementImpl(VARIABLE_DECLARATION_ELEMENT)
            PsiPerlScalarVariableImpl(Perl5: SCALAR_VARIABLE)
              PsiElement(Perl5: $$)('$')
              PerlVariableNameElementImpl(Perl5: SCALAR_NAME)('year')
          PsiElement(Perl5: ,)(',')
          PsiPerlVariableDeclarationElementImpl(VARIABLE_DECLARATION_ELEMENT)
            PsiPerlScalarVariableImpl(Perl5: SCALAR_VARIABLE)
              PsiElement(Perl5: $$)('$')
              PerlVariableNameElementImpl(Perl5: SCALAR_NAME)('month')
          PsiElement(Perl5: ,)(',')
          PsiPerlVariableDeclarationElementImpl(VARIABLE_DECLARATION_ELEMENT)
            PsiPerlScalarVariableImpl(Perl5: SCALAR_VARIABLE)
              PsiElement(Perl5: $$)('$')
              PerlVariableNameElementImpl(Perl5: SCALAR_NAME)('day')
          PsiElement(Perl5: ))(')')
        PsiElement(Perl5: =)('=')
        PsiPerlSubCallExprImpl(Perl5: SUB_CALL_EXPR)
          PsiPerlMethodImpl(Perl5: METHOD)
            PerlSubNameElementImpl(Perl5: list)('split')
          PsiPerlParenthesisedCallArgumentsImpl(Perl5: PARENTHESISED_CALL_ARGUMENTS)
            PsiElement(Perl5: ()('(')
            PsiPerlCommaSequenceExprImpl(Perl5: COMMA_SEQUENCE_EXPR)
              PsiPerlStringSqImpl(Perl5: STRING_SQ)
                PsiElement(Perl5: QUOTE_SINGLE_OPEN)(''')
                PerlStringContentElementImpl(Perl5: STRING_CONTENT)('-')
                PsiElement(Perl5: QUOTE_SINGLE_CLOSE)(''')
              PsiElement(Perl5: ,)(',')
              PsiPerlScalarVariableImpl(Perl5: SCALAR_VARIABLE)
                PsiElement(Perl5: $$)('$')
                PerlVariableNameElementImpl(Perl5: SCALAR_NAME)('date')
            PsiElement(Perl5: ))(')')
      PsiElement(Perl5: ;)(';')
    PsiPerlStatementImpl(Perl5: STATEMENT)
      PsiPerlAssignExprImpl(Perl5: ASSIGN_EXPR)
        PsiPerlScalarVariableImpl(Perl5: SCALAR_VARIABLE)
          PsiElement(Perl5: $$)('$')
          PerlVariableNameElementImpl(Perl5: SCALAR_NAME)('date')
        PsiElement(Perl5: =)('=')
        PsiPerlStringDqImpl(Perl5: STRING_DQ)
          PsiElement(Perl5: QUOTE_DOUBLE_OPEN)('"')
          PsiPerlScalarVariableImpl(Perl5: SCALAR_VARIABLE)
            PsiElement(Perl5: $$)('$')
            PerlVariableNameElementImpl(Perl5: SCALAR_NAME)('month')
          PerlStringContentElementImpl(Perl5: STRING_CONTENT_QQ)('/')
          PsiPerlScalarVariableImpl(Perl5: SCALAR_VARIABLE)
            PsiElement(Perl5: $$)('$')
            PerlVariableNameElementImpl(Perl5: SCALAR_NAME)('day')
          PsiElement(Perl5: QUOTE_DOUBLE_CLOSE)('"')
      PsiElement(Perl5: ;)(';')
    PsiElement(HTML::Mason: </%init>)('</%init>')
  HTMLMasonInitBlockImpl(HTML::Mason: HTML_MASON_INIT_BLOCK)
    PsiElement(HTML::Mason: <%init>)('<%init>')
    PsiPerlStatementImpl(Perl5: STATEMENT)
      PsiPerlAssignExprImpl(Perl5: ASSIGN_EXPR)
        PsiPerlVariableDeclarationLexicalImpl(Perl5: VARIABLE_DECLARATION_LEXICAL)
          PsiElement(Perl5: my)('my')
          PsiPerlVariableDeclarationElementImpl(VARIABLE_DECLARATION_ELEMENT)
            PsiPerlScalarVariableImpl(Perl5: SCALAR_VARIABLE)
              PsiElement(Perl5: $$)('$')
              PerlVariableNameElementImpl(Perl5: SCALAR_NAME)('ua')
        PsiElement(Perl5: =)('=')
        PsiPerlDerefExprImpl(Perl5: DEREF_EXPR)
          PsiPerlScalarVariableImpl(Perl5: SCALAR_VARIABLE)
            PsiElement(Perl5: $$)('$')
            PerlVariableNameElementImpl(Perl5: SCALAR_NAME)('r')
          PsiElement(Perl5: ->)('->')
          PsiPerlNestedCallImpl(Perl5: NESTED_CALL)
            PsiPerlMethodImpl(Perl5: METHOD)
              PerlSubNameElementImpl(Perl5: subname)('header_in')
            PsiPerlParenthesisedCallArgumentsImpl(Perl5: PARENTHESISED_CALL_ARGUMENTS)
              PsiElement(Perl5: ()('(')
              PsiPerlStringSqImpl(Perl5: STRING_SQ)
                PsiElement(Perl5: QUOTE_SINGLE_OPEN)(''')
                PerlStringContentElementImpl(Perl5: STRING_CONTENT)('User-Agent')
                PsiElement(Perl5: QUOTE_SINGLE_CLOSE)(''')
              PsiElement(Perl5: ))(')')
      PsiElement(Perl5: ;)(';')
    PsiPerlStatementImpl(Perl5: STATEMENT)
      PsiPerlReturnExprImpl(Perl5: RETURN_EXPR)
        PsiElement(Perl5: return)('return')
        PsiPerlTernaryExprImpl(Perl5: TERNARY_EXPR)
          PsiPerlParenthesisedExprImpl(Perl5: PARENTHESISED_EXPR)
            PsiElement(Perl5: ()('(')
            PsiPerlAndExprImpl(Perl5: AND_EXPR)
              PsiPerlRegexExprImpl(Perl5: REGEX_EXPR)
                PsiPerlScalarVariableImpl(Perl5: SCALAR_VARIABLE)
                  PsiElement(Perl5: $$)('$')
                  PerlVariableNameElementImpl(Perl5: SCALAR_NAME)('ua')
                PsiElement(Perl5: =~)('=~')
                PsiPerlMatchRegexImpl(Perl5: MATCH_REGEX)
                  PsiElement(Perl5: r{)('/')
                  PsiPerlPerlRegexImpl(Perl5: PERL_REGEX)
                    PsiElement(Perl5: regex)('Mozilla')
                  PsiElement(Perl5: r})('/')
                  PsiPerlPerlRegexModifiersImpl(Perl5: PERL_REGEX_MODIFIERS)
                    PsiElement(Perl5: /m)('i')
              PsiElement(Perl5: &&)('&&')
              PsiPerlRegexExprImpl(Perl5: REGEX_EXPR)
                PsiPerlScalarVariableImpl(Perl5: SCALAR_VARIABLE)
                  PsiElement(Perl5: $$)('$')
                  PerlVariableNameElementImpl(Perl5: SCALAR_NAME)('ua')
                PsiElement(Perl5: !~)('!~')
                PsiPerlMatchRegexImpl(Perl5: MATCH_REGEX)
                  PsiElement(Perl5: r{)('/')
                  PsiPerlPerlRegexImpl(Perl5: PERL_REGEX)
                    PsiElement(Perl5: regex)('MSIE')
                  PsiElement(Perl5: r})('/')
                  PsiPerlPerlRegexModifiersImpl(Perl5: PERL_REGEX_MODIFIERS)
                    PsiElement(Perl5: /m)('i')
            PsiElement(Perl5: ))(')')
          PsiElement(Perl5: ?)('?')
          PsiPerlNumberConstantImpl(Perl5: NUMBER_CONSTANT)
            PsiElement(Perl5: NUMBER)('1')
          PsiElement(Perl5: :)(':')
          PsiPerlNumberConstantImpl(Perl5: NUMBER_CONSTANT)
            PsiElement(Perl5: NUMBER)('0')
      PsiElement(Perl5: ;)(';')
    PsiElement(HTML::Mason: </%init>)('</%init>')
  PsiComment(HTML::Mason: HTML_MASON_TEMPLATE_BLOCK_HTML)('</html>')
--------------------------------------------------------------------------------
Subtree: Perl5 POD (Perl5 POD)
POD file
  PsiElement(Perl5 POD: POD_OUTER)('<html>\n\n<%init>\n# Fetch article from database\n    my $dbh = DBI::connect;\n    my $sth = $dbh->prepare("select * from articles where id = ?");\n    $sth->execute($article_id);\n    my ($headline, $date, $author, $body) = $sth->fetchrow_array;\n    # Massage the fields\n    $headline = uc($headline);\n    my ($year, $month, $day) = split('-', $date);\n    $date = "$month/$day";\n</%init>\n\n<%init>\nmy $ua = $r->header_in('User-Agent');\n    return ($ua =~ /Mozilla/i && $ua !~ /MSIE/i) ? 1 : 0;\n</%init>\n\n</html>')
--------------------------------------------------------------------------------
