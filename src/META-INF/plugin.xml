<!--
  ~ Copyright 2015 Alexandr Evstigneev
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~ http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<idea-plugin version="2">
    <id>com.perl5</id>
    <name>Perl5 Support (Camelcade)</name>
    <version>1.319</version>
    <vendor email="hurricup@evstigneev.com" url="http://www.evstigneev.com">Alexandr Evstigneev</vendor>

    <description><![CDATA[
    <p>Camelcade adds Perl5 support for IntelliJ IDEA and other JetBrains products.</p>
    <p>
    <a href="https://twitter.com/CamelcadeIDE">Twitter</a>
    | <a href="https://github.com/hurricup/Perl5-IDEA">GitHub</a>
    | <a href="https://github.com/hurricup/Perl5-IDEA/issues">Tracker</a>
    | <a href="https://github.com/hurricup/Perl5-IDEA/wiki">Wiki</a>
    </p>
    <p><a href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=HJCUADZKY5G7E"><image src="https://www.paypalobjects.com/en_GB/i/btn/btn_donate_LG.gif" border="0" alt="Donate to support Project"></a></p>
    ]]></description>

    <change-notes><![CDATA[
      <p><b>1.3 changes</b></p>

      <p><b>Features & Improvements:</b>
      <ul>
      <li>Implemented file level variables inspection. (Pretty useful while migrating from CGI to some persistent server)</li>
      <li>Implemented parser extension for Switch core module, fixes #658</li>
      <li>Added spacing control for call arguments, fixes #664</li>
      <li>Implemented spaces removal around array index, hash index and dereference, fixes #662</li>
      <li>Self-object reference variable names are now configurable in Perl5 settings, fixes #706</li>
      <li>Significally improved live templates, added templates for parser extensions</li>
      <li>Implemented quote handler for regexps and string-like operators, fixes #741</li>
      <li>Implemented dumb and comfy hash keys autocompletion, not intelligent, most like in Sublime Text, fixes #711</li>
      <li>Implemented support of Class::Acessor api, fixes #778</li>
      <li>Moose<ul>
      <li>Implemented live-templates for Moose constructions</li>
      <li>Implemented Moose super call resolution, fixes #553</li>
      <li>Implemented Moose inner call resolution, fixes #555</li>
      </ul></li>
      <li>Exporter<ul>
      <li>Implemented resolution for @EXPORT and @EXPORT_OK assigned strings, fixes #364</li>
      <li>Implemented auto-completion for @EXPORT and @EXPORT_OK assigned strings, fixes #469</li>
      </ul></li>
      <li>Mason2<ul>
        <li>Implemented filetypes for Mason2: top-level component, internal component and perl component</li>
        <li>Implemented lexing and parsing of Mason2 files</li>
        <li>Implemented settings to select Mason2 components roots</li>
        <li>Implemented components auto-basing</li>
        <li>Implemented folding of Mason2 files</li>
        <li>Implemented automatic close tag insertion on typing</li>
        <li>Implemented formatter and pre-formatter for perl code</li>
        <li>Implemented live-templates for Mason2 syntax constructions</li>
      </ul></li>
      <li>Mojolicious<ul>
        <li>Parser has been re-written almost from scratch and now is much more appropriate</li>
        <li>Fixed problem with statement modifiers parsing in expressions blocks</li>
        <li>Fixed problems with templates folding</li>
        <li>Implemented automatic close tag insertion on typing (open tag + space)</li>
        <li>Implemented formatter and pre-formatter for perl code</li>
      </ul></li>
      <li>Embedded Perl<ul>
        <li>Implemented automatic close tag insertion on typing (open tag + space)</li>
        <li>Implemented formatter and pre-formatter for perl code</li>
      </ul></li>
      </ul>
      </p>

      <p><b>Fixes:</b>
      <ul>
      <li>Fixed possible NPE on specialized IDE start, #CAMELCADE-46 fixed</li>
      <li>Fixed exception on empty error element in inspection, #CAMELCADE-44 fixed</li>
      <li>Fixed possible NPE on files resolution, #CAMELCADE-43 fixed</li>
      <li>Fixed possible Icon not found exception on acitons menu opening, #CAMELCADE-42 fixed</li>
      <li>Fixed bug with creating top-level packages with main:: prefix, fixes #638</li>
      <li>Implemented proper parsing for stacked file operations _ handle, fixes #640</li>
      <li>Fixed parsing of print target handle if followed by expression in parens or negation, fixes #560</li>
      <li>Fixed indenting for single-argument nested calls, fixes #663</li>
      <li>Fixed semicolon and statement modifiers parsing in the Moose statements, fixes #678</li>
      <li>Braceless namespaces now being parsed the right way, fixes #674</li>
      <li>Fixed bug with occasional here-doc terminator indention on copy-paste or re-formatting, fixes #631</li>
      <li>Fixed bug with here-doc content re-formatting, fixes #628</li>
      <li>Fixed bug with quotes auto-closing in package and test files</li>
      <li>Fixed bug with auto-completion not opening after typing ->, fixes #763</li>
      <li>Fixed bug with inadequate auto-opened completion when typing special chars (dots, commas, etc.), fixes #781</li>
      </ul>
      </p>

    ]]>
    </change-notes>

    <!-- please see http://confluence.jetbrains.com/display/IDEADEV/Build+Number+Ranges for description -->
    <idea-version since-build="139"/>

    <!-- please see http://confluence.jetbrains.com/display/IDEADEV/Plugin+Compatibility+with+IntelliJ+Platform+Products
         on how to target different products -->

    <depends>com.intellij.modules.lang</depends>
    <depends optional="true" config-file="java-deps.xml">com.intellij.modules.java</depends>

    <extensionPoints>
        <extensionPoint name="packageProcessor" beanClass="com.perl5.lang.perl.idea.EP.PerlPackageProcessorEP">
            <with attribute="implementationClass"
                  implements="com.perl5.lang.perl.extensions.packageprocessor.PerlPackageProcessor"/>
        </extensionPoint>
        <extensionPoint name="parserExtension"
                        interface="com.perl5.lang.perl.extensions.parser.PerlParserExtension"/>
    </extensionPoints>

    <extensions defaultExtensionNs="com.perl5">
        <packageProcessor key="parent"
                          implementationClass="com.perl5.lang.perl.extensions.packageprocessor.impl.ParentProcessor"/>
        <packageProcessor key="base"
                          implementationClass="com.perl5.lang.perl.extensions.packageprocessor.impl.BaseProcessor"/>
        <packageProcessor key="strict"
                          implementationClass="com.perl5.lang.perl.extensions.packageprocessor.impl.StrictProcessor"/>
        <packageProcessor key="warnings"
                          implementationClass="com.perl5.lang.perl.extensions.packageprocessor.impl.WarningsProcessor"/>
        <packageProcessor key="feature"
                          implementationClass="com.perl5.lang.perl.extensions.packageprocessor.impl.FeatureProcessor"/>
        <packageProcessor key="mro"
                          implementationClass="com.perl5.lang.perl.extensions.packageprocessor.impl.MroProcessor"/>
        <packageProcessor key="lib"
                          implementationClass="com.perl5.lang.perl.extensions.packageprocessor.impl.LibProcessor"/>
        <packageProcessor key="Mojo::Base"
                          implementationClass="com.perl5.lang.perl.extensions.packageprocessor.impl.MojoBaseProcessor"/>
        <packageProcessor key="Moose"
                          implementationClass="com.perl5.lang.perl.extensions.packageprocessor.impl.MooseProcessor"/>
        <packageProcessor key="Moo"
                          implementationClass="com.perl5.lang.perl.extensions.packageprocessor.impl.MooProcessor"/>

        <parserExtension implementation="com.perl5.lang.perl.parser.PerlSwitchPerlParserExtensionImpl"/>
        <parserExtension implementation="com.perl5.lang.perl.parser.MethodSignaturesSimpleParserExtensionImpl"/>
        <parserExtension implementation="com.perl5.lang.perl.parser.MooseParserExtensionImpl"/>
        <parserExtension implementation="com.perl5.lang.perl.parser.ClassAccessorParserExtensionImpl"/>
    </extensions>

    <extensions defaultExtensionNs="com.intellij">
        <internalFileTemplate name="Perl5 package"/>
        <internalFileTemplate name="Perl5 script"/>
        <internalFileTemplate name="Perl5 embedded"/>
        <internalFileTemplate name="Perl5 mojolicious"/>
        <internalFileTemplate name="Perl5 test"/>

        <annotator language="Perl5"
                   implementationClass="com.perl5.lang.perl.parser.Class.Accessor.idea.annotator.ClassAccessorAnnotator"
                   order="after PERL_SUBS_ANNOTATOR"/>
        <stubElementTypeHolder class="com.perl5.lang.perl.parser.Class.Accessor.ClassAccessorElementTypes"/>
        <referencesSearch
                implementation="com.perl5.lang.perl.parser.Class.Accessor.idea.findUsages.ClassAccessorReferenceSearcher"/>

        <psi.referenceContributor language="Perl5"
                                  implementation="com.perl5.lang.perl.psi.references.PerlReferencesContributor"/>

        <projectService serviceImplementation="com.perl5.lang.perl.idea.configuration.settings.Perl5Settings"/>

        <applicationService serviceInterface="com.perl5.lang.perl.idea.folding.PerlFoldingSettings"
                            serviceImplementation="com.perl5.lang.perl.idea.folding.PerlFoldingSettingsImpl"/>
        <applicationService serviceInterface="com.perl5.lang.perl.idea.codeInsight.Perl5CodeInsightSettings"
                            serviceImplementation="com.perl5.lang.perl.idea.codeInsight.Perl5CodeInsightSettings"/>

        <preFormatProcessor implementation="com.perl5.lang.perl.idea.formatter.PerlPreFormatProcessor"/>
        <lang.formatter language="Perl5"
                        implementationClass="com.perl5.lang.perl.idea.formatter.PerlFormattingModelBuilder"/>
        <codeStyleSettingsProvider
                implementation="com.perl5.lang.perl.idea.formatter.settings.PerlCodeStyleSettingsProvider"/>
        <langCodeStyleSettingsProvider
                implementation="com.perl5.lang.perl.idea.formatter.settings.PerlLanguageCodeStyleSettingsProvider"/>
        <editorSmartKeysConfigurable instance="com.perl5.lang.perl.idea.editor.smartkeys.options.PerlSmartKeyOptions"/>

        <lang.indentStrategy language="Perl5" implementationClass="com.perl5.lang.perl.idea.editor.PerlIndentStrategy"/>

        <projectConfigurable displayName="Perl5 libs" groupId="project"
                             provider="com.perl5.lang.perl.idea.configuration.paths.PerlPathsConfigurableProvider"/>
        <projectConfigurable groupId="language"
                             provider="com.perl5.lang.perl.idea.configuration.settings.PerlSettingsConfigurableProvider"
                             id="PERL5_MAIN_SETTINGS"/>

        <projectStructure.sourceRootEditHandler
                implementation="com.perl5.lang.perl.idea.configuration.paths.PerlIncludeLibrarySourceRootEditHandler"/>


        <createFromTemplateHandler
                implementation="com.perl5.lang.perl.idea.filetemplates.PerlCreatePackageFromTemplateHandler"/>
        <defaultTemplatePropertiesProvider
                implementation="com.perl5.lang.perl.idea.filetemplates.PerlFilePropertiesProvider" order="last"/>

        <languageInjector implementation="com.perl5.lang.perl.idea.intellilang.PerlLanguageInjector"/>

        <typedHandler implementation="com.perl5.lang.perl.idea.editor.smartkeys.PerlTypedHandler"
                      id="PerlTypedHandler" order="first"/>

        <enterHandlerDelegate implementation="com.perl5.lang.perl.idea.editor.smartkeys.PerlEnterHandlerDelegate"
                              id="PerlEnterHandler" order="first"/>

        <fileTypeDetector implementation="com.perl5.PerlFileTypeDetector"/>

        <errorHandler implementation="com.perl5.errorHandler.YoutrackErrorHandler"/>
        <sdkType implementation="com.perl5.lang.perl.idea.sdk.PerlSdkType"/>


        <fileTypeFactory implementation="com.perl5.PerlFileTypeFactory"/>

        <configurationType implementation="com.perl5.lang.perl.idea.run.PerlConfigurationType"/>
        <runConfigurationProducer implementation="com.perl5.lang.perl.idea.run.PerlConfigurationProducer"/>
        <lang.parserDefinition language="Perl5" implementationClass="com.perl5.lang.perl.PerlParserDefinition"/>
        <lang.syntaxHighlighterFactory language="Perl5" key="Perl5"
                                       implementationClass="com.perl5.lang.perl.idea.highlighter.PerlSyntaxHighlighterFactory"/>

        <lang.psiStructureViewFactory language="Perl5"
                                      implementationClass="com.perl5.lang.perl.idea.structureView.PerlStructureViewFactory"/>

        <typeHierarchyProvider language="Perl5"
                               implementationClass="com.perl5.lang.perl.idea.hierarchy.namespace.PerlPackageHierarchyProvider"/>

        <consoleFilterProvider implementation="com.perl5.lang.perl.idea.execution.filters.PerlConsoleFilterProvider"/>

        <annotator language="Perl5" implementationClass="com.perl5.lang.perl.idea.annotators.PerlAnnotatorMisc"/>
        <annotator language="Perl5" implementationClass="com.perl5.lang.perl.idea.annotators.PerlAnnotatorSubs"
                   id="PERL_SUBS_ANNOTATOR" order="first"/>
        <annotator language="Perl5" implementationClass="com.perl5.lang.perl.idea.annotators.PerlAnnotatorVariables"/>
        <annotator language="Perl5" implementationClass="com.perl5.lang.perl.idea.annotators.PerlAnnotatorNamespaces"/>

        <codeFoldingOptionsProvider instance="com.perl5.lang.perl.idea.folding.PerlCodeFoldingOptionsProvider"/>

        <completion.contributor language="Perl5"
                                implementationClass="com.perl5.lang.perl.idea.completion.PerlCompletionContributor"/>
        <lang.foldingBuilder language="Perl5"
                             implementationClass="com.perl5.lang.perl.idea.folding.PerlFoldingBuilder"/>
        <lang.commenter language="Perl5" implementationClass="com.perl5.lang.perl.idea.editor.PerlCommenter"/>
        <lang.braceMatcher language="Perl5" implementationClass="com.perl5.lang.perl.idea.editor.PerlBraceMatcher"/>

        <elementDescriptionProvider implementation="com.perl5.lang.perl.idea.PerlElementDescriptionProvider"/>
        <elementDescriptionProvider
                implementation="com.perl5.lang.perl.parser.Class.Accessor.psi.ClassAccessorElementDescriptionProvider"/>


        <lang.refactoringSupport language="Perl5"
                                 implementationClass="com.perl5.lang.perl.idea.refactoring.PerlRefactoringSupportProvider"/>

        <gotoClassContributor
                implementation="com.perl5.lang.perl.idea.gotosearch.PerlGoToNamespaceDefinitionContributor"/>
        <gotoSymbolContributor implementation="com.perl5.lang.perl.idea.gotosearch.PerlGoToSubDefinitionContributor"/>
        <gotoSymbolContributor implementation="com.perl5.lang.perl.idea.gotosearch.PerlGotoConstantContributor"/>
        <gotoSymbolContributor implementation="com.perl5.lang.perl.idea.gotosearch.PerlGotoVariableContributor"/>


        <gotoDeclarationHandler implementation="com.perl5.lang.perl.idea.PerlGotoDeclarationHandler"/>
        <weigher key="completion" implementationClass="com.perl5.lang.perl.idea.PerlCompletionWeighter" order="first"/>

        <lang.namesValidator language="Perl5" implementationClass="com.perl5.lang.perl.idea.PerlNamesValidator"/>

        <quoteHandler fileType="Perl5 script" className="com.perl5.lang.perl.idea.editor.PerlQuoteHandler"/>
        <quoteHandler fileType="Perl5 test" className="com.perl5.lang.perl.idea.editor.PerlQuoteHandler"/>
        <quoteHandler fileType="Perl5 package" className="com.perl5.lang.perl.idea.editor.PerlQuoteHandler"/>

        <lang.elementManipulator forClass="com.perl5.lang.perl.psi.impl.PerlHeredocElementImpl" order="first"
                                 implementationClass="com.perl5.lang.perl.idea.manipulators.PerlPsiHeredocManipulator"/>

        <lang.elementManipulator forClass="com.perl5.lang.perl.psi.PerlStringContentElement" order="first"
                                 implementationClass="com.perl5.lang.perl.idea.manipulators.PerlStringContentManipulator"/>

        <lang.elementManipulator forClass="com.perl5.lang.perl.psi.PerlNamespaceElement" order="first"
                                 implementationClass="com.perl5.lang.perl.idea.manipulators.PerlNamespaceElementManipulator"/>

        <lang.elementManipulator forClass="com.perl5.lang.perl.psi.PerlVariableNameElement" order="first"
                                 implementationClass="com.perl5.lang.perl.idea.manipulators.PerlVariableNameManipulator"/>

        <lang.elementManipulator forClass="com.perl5.lang.perl.psi.PerlSubNameElement" order="first"
                                 implementationClass="com.perl5.lang.perl.idea.manipulators.PerlSubNameManipulator"/>

        <lang.elementManipulator forClass="com.perl5.lang.perl.psi.PerlHeredocTerminatorElement" order="first"
                                 implementationClass="com.perl5.lang.perl.idea.manipulators.PerlHeredocTerminatorManipulator"/>


        <renameHandler
                implementation="com.perl5.lang.perl.idea.refactoring.rename.PerlStringNameIdentifierInplaceRenameHandler"
                order="first"/>

        <renamePsiElementProcessor
                implementation="com.perl5.lang.perl.idea.refactoring.rename.PerlDefaultRenameProcessor"/>
        <renamePsiElementProcessor
                implementation="com.perl5.lang.perl.idea.refactoring.rename.PerlRenameNamespaceDefinitionProcessor"/>
        <renamePsiElementProcessor
                implementation="com.perl5.lang.perl.idea.refactoring.rename.PerlRenameFileProcessor"/>
        <!-- following processors are alternative to VirtualFileWatcher -->
        <!--<renamePsiElementProcessor-->
        <!--implementation="com.perl5.lang.perl.idea.refactoring.move.PerlRenameDirectoryProcessor"/>-->
        <!--<renamePsiElementProcessor-->
        <!--implementation="com.perl5.lang.perl.idea.refactoring.move.PerlRenameIDEAPackageProcessor"/>-->

        <moveFileHandler implementation="com.perl5.lang.perl.idea.refactoring.move.PerlMoveFileHandler"/>

        <nameSuggestionProvider implementation="com.perl5.lang.perl.idea.refactoring.PerlNameSuggestionProvider"
                                order="first"/>

        <defaultLiveTemplatesProvider
                implementation="com.perl5.lang.perl.idea.livetemplates.PerlDefaultTemplatesProvider"/>
        <defaultLiveTemplatesProvider
                implementation="com.perl5.lang.perl.parser.method.signatures.simple.idea.liveTemplates.MethodSignaturesSimpleTemplatesProvider"/>

        <defaultLiveTemplatesProvider
                implementation="com.perl5.lang.perl.parser.moose.idea.liveTemplates.MooseTemplatesProvider"/>
        <stubElementTypeHolder class="com.perl5.lang.perl.parser.moose.MooseElementTypes"/>
        <annotator language="Perl5" implementationClass="com.perl5.lang.perl.parser.moose.idea.annotator.MooseAnnotator"
                   order="after PERL_SUBS_ANNOTATOR"/>
        <referencesSearch
                implementation="com.perl5.lang.perl.parser.moose.psi.references.PerlMooseReferencesSearcher"/>

        <liveTemplateContext implementation="com.perl5.lang.perl.idea.livetemplates.PerlTemplateContextType$Generic"/>
        <liveTemplateContext implementation="com.perl5.lang.perl.idea.livetemplates.PerlTemplateContextType$Postfix"/>
        <liveTemplateContext implementation="com.perl5.lang.perl.idea.livetemplates.PerlTemplateContextType$Prefix"/>
        <liveTemplateContext
                implementation="com.perl5.lang.perl.idea.livetemplates.PerlTemplateContextType$UnfinishedIf"/>


        <defaultLiveTemplatesProvider
                implementation="com.perl5.lang.perl.parser.perlswitch.idea.liveTemplates.PerlSwitchTemplatesProvider"/>
        <liveTemplateContext implementation="com.perl5.lang.perl.idea.livetemplates.PerlTemplateContextType$TestFile"/>
        <liveTemplateOptionalProcessor implementation="com.perl5.lang.perl.idea.livetemplates.PerlIndentionSuppresor"/>


        <liveTemplateContext
                implementation="com.perl5.lang.perl.parser.perlswitch.idea.liveTemplates.PerlSwitchTemplateContextType"/>
        <liveTemplateContext
                implementation="com.perl5.lang.perl.parser.perlswitch.idea.liveTemplates.PerlInSwitchAfterCaseTemplateContextType"/>

        <annotator language="Perl5"
                   implementationClass="com.perl5.lang.perl.parser.perlswitch.idea.annotator.PerlSwitchAnnotator"
                   order="after PERL_SUBS_ANNOTATOR"/>

        <stubElementTypeHolder class="com.perl5.lang.perl.idea.stubs.PerlStubElementTypes"/>

        <stubIndex implementation="com.perl5.lang.perl.idea.stubs.variables.PerlScalarsStubIndex"/>
        <stubIndex implementation="com.perl5.lang.perl.idea.stubs.variables.PerlArraysStubIndex"/>
        <stubIndex implementation="com.perl5.lang.perl.idea.stubs.variables.PerlHashesStubIndex"/>

        <stubIndex implementation="com.perl5.lang.perl.idea.stubs.subsdefinitions.constants.PerlConstantsStubIndex"/>
        <stubIndex implementation="com.perl5.lang.perl.idea.stubs.imports.PerlUseStatementStubIndex"/>

        <stubIndex implementation="com.perl5.lang.perl.idea.stubs.globs.PerlGlobsStubIndex"/>
        <stubIndex implementation="com.perl5.lang.perl.idea.stubs.subsdefinitions.PerlSubDefinitionsStubIndex"/>
        <stubIndex implementation="com.perl5.lang.perl.idea.stubs.subsdeclarations.PerlSubDeclarationStubIndex"/>
        <stubIndex implementation="com.perl5.lang.perl.idea.stubs.namespaces.PerlNamespaceDefinitionStubIndex"/>
        <stubIndex implementation="com.perl5.lang.perl.idea.stubs.namespaces.PerlParentNamespaceDefinitionStubIndex"/>

        <lang.findUsagesProvider language="Perl5"
                                 implementationClass="com.perl5.lang.perl.idea.findusages.PerlFindUsagesProvider"/>


        <fileTypeFactory implementation="com.perl5.lang.embedded.filetypes.EmbeddedPerlFileTypeFactory"/>
        <lang.parserDefinition language="Embedded Perl"
                               implementationClass="com.perl5.lang.embedded.EmbeddedPerlParserDefinition"/>
        <lang.fileViewProviderFactory language="Embedded Perl"
                                      implementationClass="com.perl5.lang.embedded.EmbeddedPerlFileViewProviderFactory"/>
        <lang.syntaxHighlighterFactory language="Embedded Perl" key="Embedded Perl"
                                       implementationClass="com.perl5.lang.embedded.idea.highlighting.EmbeddedPerlSyntaxHighlighterFactory"/>
        <lang.findUsagesProvider language="Embedded Perl"
                                 implementationClass="com.perl5.lang.embedded.idea.findusages.EmbeddedPerlFindUsagesProvider"/>
        <lang.braceMatcher language="Embedded Perl"
                           implementationClass="com.perl5.lang.embedded.idea.editor.EmbeddedPerlBraceMatcher"/>

        <typedHandler implementation="com.perl5.lang.embedded.idea.editor.smartkeys.EmbeddedPerlTypedHandler"
                      order="first"/>
        <enterHandlerDelegate implementation="com.perl5.lang.embedded.idea.editor.smartkeys.EmbeddedPerlEnterDelegate"
                              id="EmbeddedPerlEnterHandler" order="first"/>
        <lang.formatter language="Embedded Perl"
                        implementationClass="com.perl5.lang.embedded.idea.formatter.EmbeddedPerlFormattingModelBuilder"/>


        <lang.namesValidator language="Embedded Perl"
                             implementationClass="com.perl5.lang.perl.idea.PerlNamesValidator"/>
        <quoteHandler fileType="Embedded perl" className="com.perl5.lang.perl.idea.editor.PerlQuoteHandler"/>
        <preFormatProcessor implementation="com.perl5.lang.embedded.idea.formatter.EmbeddedPerlPreFormatProcessor"/>

        <lang.foldingBuilder language="Embedded Perl"
                             implementationClass="com.perl5.lang.embedded.idea.folding.EmbeddedPerlFoldingBuilder"/>

        <!--<lang.formatter language="Embedded Perl"-->
        <!--implementationClass="com.perl5.lang.perl.idea.formatter.PerlFormattingModelBuilder"/>-->

        <lang.psiStructureViewFactory language="Embedded Perl"
                                      implementationClass="com.perl5.lang.perl.idea.structureView.PerlStructureViewFactory"/>

        <lang.refactoringSupport language="Embedded Perl"
                                 implementationClass="com.perl5.lang.perl.idea.refactoring.PerlRefactoringSupportProvider"/>

        <!--Temporary solution, better than nothing-->
        <multiLangCommenter implementation="com.perl5.lang.embedded.idea.commenter.EmbeddedPerlCommenterProvider"/>

        <!-- Here should be an EmbeddedPerlCommenter -->
        <lang.commenter language="Embedded Perl"
                        implementationClass="com.perl5.lang.perl.idea.editor.PerlCommenter"/>


        <fileTypeFactory implementation="com.perl5.lang.mojolicious.filetypes.MojoliciousFileTypeFactory"/>
        <lang.parserDefinition language="Mojolicious Perl"
                               implementationClass="com.perl5.lang.mojolicious.MojoliciousParserDefinition"/>
        <lang.fileViewProviderFactory language="Mojolicious Perl"
                                      implementationClass="com.perl5.lang.mojolicious.MojoliciousFileViewProviderFactory"/>
        <lang.syntaxHighlighterFactory language="Mojolicious Perl" key="Mojolicious Perl"
                                       implementationClass="com.perl5.lang.mojolicious.idea.highlighter.MojoliciousSyntaxHighlighterFactory"/>
        <lang.findUsagesProvider language="Mojolicious Perl"
                                 implementationClass="com.perl5.lang.mojolicious.idea.findusages.MojoliciousFindUsagesProvider"/>
        <lang.formatter language="Mojolicious Perl"
                        implementationClass="com.perl5.lang.mojolicious.idea.formatter.MojoliciousFormattingModelBuilder"/>
        <completion.contributor language="Perl5"
                                implementationClass="com.perl5.lang.mojolicious.idea.completion.MojoliciousCompletionContributor"/>

        <lang.namesValidator language="Mojolicious Perl"
                             implementationClass="com.perl5.lang.perl.idea.PerlNamesValidator"/>

        <typedHandler implementation="com.perl5.lang.mojolicious.idea.editor.smartkeys.MojoliciousTypedHandler"
                      order="first"/>
        <enterHandlerDelegate
                implementation="com.perl5.lang.mojolicious.idea.editor.smartkeys.MojoliciousEnterHandlerDelegate"
                id="MojoliciousPerlEnterHandler" order="first"/>

        <quoteHandler fileType="Mojolicious Perl5 Template"
                      className="com.perl5.lang.perl.idea.editor.PerlQuoteHandler"/>

        <lang.refactoringSupport language="Mojolicious Perl"
                                 implementationClass="com.perl5.lang.perl.idea.refactoring.PerlRefactoringSupportProvider"/>

        <lang.psiStructureViewFactory language="Mojolicious Perl"
                                      implementationClass="com.perl5.lang.perl.idea.structureView.PerlStructureViewFactory"/>
        <lang.braceMatcher language="Mojolicious Perl"
                           implementationClass="com.perl5.lang.mojolicious.idea.editor.MojoliciousBraceMatcher"/>
        <lang.foldingBuilder language="Mojolicious Perl"
                             implementationClass="com.perl5.lang.mojolicious.idea.folding.MojoliciousFoldingBuilder"/>
        <preFormatProcessor implementation="com.perl5.lang.mojolicious.idea.formatter.MojoliciousPreFormatProcessor"/>
        <multiLangCommenter
                implementation="com.perl5.lang.mojolicious.idea.commenter.MojoliciousCommenterProvider"/>

        <lang.commenter language="Mojolicious Perl"
                        implementationClass="com.perl5.lang.perl.idea.editor.PerlCommenter"/>


        <projectService serviceImplementation="com.perl5.lang.mason2.idea.configuration.MasonSettings"/>

        <stubElementTypeHolder class="com.perl5.lang.mason2.elementType.MasonElementTypes"/>

        <stubIndex implementation="com.perl5.lang.mason2.psi.stubs.MasonNamespaceDefitnitionsStubIndex"/>
        <stubIndex implementation="com.perl5.lang.mason2.psi.stubs.MasonParentNamespacesStubIndex"/>

        <completion.contributor language="Perl5"
                                implementationClass="com.perl5.lang.mason2.idea.completion.MasonCompletionContributor"/>

        <liveTemplateContext implementation="com.perl5.lang.mason2.idea.livetemplates.MasonTemplateContextType"/>
        <liveTemplatePreprocessor implementation="com.perl5.lang.mason2.idea.livetemplates.MasonTemplatePreProcessor"/>
        <defaultLiveTemplatesProvider
                implementation="com.perl5.lang.mason2.idea.livetemplates.MasonLivetemplatesProvider"/>

        <projectConfigurable
                provider="com.perl5.lang.mason2.idea.configuration.MasonSettingsConfigurableProvider"
                parentId="PERL5_MAIN_SETTINGS" groupId="language"/>
        <editorNotificationProvider
                implementation="com.perl5.lang.mason2.idea.editor.notification.MasonPathsNotification"/>


        <lang.parserDefinition language="Mason2"
                               implementationClass="com.perl5.lang.mason2.MasonParserDefinition"/>
        <typeHierarchyProvider language="Mason2 Templating Language"
                               implementationClass="com.perl5.lang.mason2.idea.hierarchy.MasonTemplatingPackageHierarchyProvider"/>
        <typeHierarchyProvider language="Mason2"
                               implementationClass="com.perl5.lang.mason2.idea.hierarchy.MasonPackageHierarchyProvider"/>
        <fileTypeFactory implementation="com.perl5.lang.mason2.filetypes.MasonFileTypeFactory"/>
        <lang.syntaxHighlighterFactory language="Mason2" key="Mason2"
                                       implementationClass="com.perl5.lang.mason2.idea.highlighter.MasonSyntaxHighlighterFactory"/>
        <typedHandler implementation="com.perl5.lang.mason2.idea.editor.MasonTypedHandler" order="first"/>
        <lang.findUsagesProvider language="Mason2"
                                 implementationClass="com.perl5.lang.mason2.idea.findusages.MasonTemplatingFindUsagesProvider"/>
        <lang.findUsagesProvider language="Mason2"
                                 implementationClass="com.perl5.lang.perl.idea.findusages.PerlFindUsagesProvider"/>
        <lang.foldingBuilder language="Mason2"
                             implementationClass="com.perl5.lang.mason2.idea.folding.MasonFoldingBuilder"/>
        <lang.namesValidator language="Mason2"
                             implementationClass="com.perl5.lang.perl.idea.PerlNamesValidator"/>
        <lang.formatter language="Mason2"
                        implementationClass="com.perl5.lang.mason2.idea.formatter.MasonFormattingModelBuilder"/>
        <lang.indentStrategy language="Mason2"
                             implementationClass="com.perl5.lang.mason2.idea.editor.MasonIndentStrategy"/>
        <quoteHandler fileType="Mason2 top-level component"
                      className="com.perl5.lang.perl.idea.editor.PerlQuoteHandler"/>
        <quoteHandler fileType="Mason2 internal component"
                      className="com.perl5.lang.perl.idea.editor.PerlQuoteHandler"/>
        <quoteHandler fileType="Mason2 pure Perl component"
                      className="com.perl5.lang.perl.idea.editor.PerlQuoteHandler"/>
        <lang.refactoringSupport language="Mason2"
                                 implementationClass="com.perl5.lang.perl.idea.refactoring.PerlRefactoringSupportProvider"/>
        <lang.psiStructureViewFactory language="Mason2"
                                      implementationClass="com.perl5.lang.perl.idea.structureView.PerlStructureViewFactory"/>
        <lang.braceMatcher language="Mason2"
                           implementationClass="com.perl5.lang.mason2.idea.editor.MasonBraceMatcher"/>
        <preFormatProcessor implementation="com.perl5.lang.mason2.idea.formatter.MasonPreFormatProcessor"/>


        <lang.parserDefinition language="Mason2 Templating Language"
                               implementationClass="com.perl5.lang.mason2.MasonTemplatingParserDefinition"/>
        <lang.fileViewProviderFactory language="Mason2 Templating Language"
                                      implementationClass="com.perl5.lang.mason2.MasonTemplatingFileViewProviderFactory"/>
        <lang.findUsagesProvider language="Mason2 Templating Language"
                                 implementationClass="com.perl5.lang.mason2.idea.findusages.MasonTemplatingFindUsagesProvider"/>


        <fileTypeFactory implementation="com.perl5.lang.pod.filetypes.PodFileTypeFactory"/>
        <lang.parserDefinition language="Perl5 POD" implementationClass="com.perl5.lang.pod.PodParserDefinition"/>
        <lang.syntaxHighlighterFactory language="Perl5 POD" key="Perl5 POD"
                                       implementationClass="com.perl5.lang.pod.idea.highlighter.PodSyntaxHighlighterFactory"/>
        <quoteHandler fileType="POD file" className="com.perl5.lang.perl.idea.editor.PerlQuoteHandler"/>


        <fileTypeFactory implementation="com.perl5.lang.xs.filetypes.XSFileTypeFactory"/>

        <additionalTextAttributes scheme="Default" file="colorSchemes/npp_default.xml"/>
        <additionalTextAttributes scheme="Darcula" file="colorSchemes/perl_darcula.xml"/>

        <additionalTextAttributes scheme="Default" file="colorSchemes/pod_default.xml"/>

        <colorSettingsPage implementation="com.perl5.lang.perl.idea.highlighter.PerlColorSettingsPage"/>
        <colorSettingsPage implementation="com.perl5.lang.pod.idea.highlighter.PodColorSettingsPage"/>

        <localInspection language="Perl5"
                         shortName="PackageFileMissing" displayName="Missing package file" groupName="Perl5"
                         enabledByDefault="true" level="WARNING"
                         implementationClass="com.perl5.lang.perl.idea.inspections.PerlPackageFileMissingInspection"/>

        <localInspection language="Perl5"
                         shortName="FileLevelVariable" displayName="File level variables" groupName="Perl5"
                         enabledByDefault="false" level="WARNING"
                         implementationClass="com.perl5.lang.perl.idea.inspections.PerlVariableFileLevelInspection"/>

        <localInspection language="Perl5"
                         shortName="NamespaceUndefined" displayName="Unresovable namespace" groupName="Perl5"
                         enabledByDefault="true" level="WARNING"
                         implementationClass="com.perl5.lang.perl.idea.inspections.PerlNamespaceUndefinedInspection"/>
        <localInspection language="Perl5"
                         shortName="NamespaceClashes" displayName="Clashed namespace definition" groupName="Perl5"
                         enabledByDefault="true" level="WARNING"
                         implementationClass="com.perl5.lang.perl.idea.inspections.PerlNamespaceClashesInspection"/>
        <localInspection language="Perl5"
                         shortName="NamespaceMultipleDefinitions" displayName="Multiple namespace definitions"
                         groupName="Perl5" enabledByDefault="true" level="WARNING"
                         implementationClass="com.perl5.lang.perl.idea.inspections.PerlNamespaceMultipleDefinitionsInspection"/>
        <!--<localInspection language="Perl5"-->
        <!--shortName="NamespaceRecursiveInheritance" displayName="Recursive inheritance" groupName="Perl5"-->
        <!--enabledByDefault="true" level="ERROR"-->
        <!--implementationClass="com.perl5.lang.perl.idea.inspections.PerlNamespaceRecursiveInheritanceInspection"/>-->

        <localInspection language="Perl5"
                         shortName="FancyMethodCall" displayName="Fancy method calls" groupName="Perl5"
                         enabledByDefault="true" level="WARNING"
                         implementationClass="com.perl5.lang.perl.idea.inspections.PerlFancyMethodCallInspection"/>

        <localInspection language="Perl5"
                         shortName="SubDeprecated" displayName="Deprecated sub" groupName="Perl5"
                         enabledByDefault="true" level="WARNING"
                         implementationClass="com.perl5.lang.perl.idea.inspections.PerlSubDeprecatedInspection"/>
        <localInspection language="Perl5"
                         shortName="SubUnresolvable" displayName="Unresolvable sub" groupName="Perl5"
                         enabledByDefault="true" level="WARNING"
                         implementationClass="com.perl5.lang.perl.idea.inspections.PerlSubUnresolvableInspection"/>
        <localInspection language="Perl5"
                         shortName="SubMultipleDeclarations" displayName="Multiple sub declarations" groupName="Perl5"
                         enabledByDefault="true" level="WARNING"
                         implementationClass="com.perl5.lang.perl.idea.inspections.PerlSubMultipleDeclarationsInspection"/>
        <localInspection language="Perl5"
                         shortName="SubMultipleDefinitions" displayName="Multiple sub definitions" groupName="Perl5"
                         enabledByDefault="true" level="WARNING"
                         implementationClass="com.perl5.lang.perl.idea.inspections.PerlSubMultipleDefinitionsInspection"/>
        <localInspection language="Perl5"
                         shortName="SubUnused" displayName="Unsused sub or constant" groupName="Perl5"
                         enabledByDefault="false" level="WARNING"
                         implementationClass="com.perl5.lang.perl.idea.inspections.PerlSubUnusedInpsection"/>


        <localInspection language="Perl5"
                         shortName="VariableUnresolvable" displayName="Unresolvable variable" groupName="Perl5"
                         enabledByDefault="true" level="WARNING"
                         implementationClass="com.perl5.lang.perl.idea.inspections.PerlVariableUnresolvableInspection"/>
        <localInspection language="Perl5"
                         shortName="VariableShadows" displayName="Variables shadowing" groupName="Perl5"
                         enabledByDefault="true" level="WARNING"
                         implementationClass="com.perl5.lang.perl.idea.inspections.PerlVariableShadowingInspection"/>
        <localInspection language="Perl5"
                         shortName="VariableLexicalBuiltIn" displayName="Lexical built-in declarations"
                         groupName="Perl5" enabledByDefault="true" level="WARNING"
                         implementationClass="com.perl5.lang.perl.idea.inspections.PerlVariableBuiltinRedeclarationInspection"/>
        <localInspection language="Perl5"
                         shortName="UnusedLexicalVariable" displayName="Unused lexical variables" groupName="Perl5"
                         enabledByDefault="true" level="WARNING"
                         implementationClass="com.perl5.lang.perl.idea.inspections.PerlVariableLexicalUnusedInspection"/>
        <localInspection language="Perl5"
                         shortName="UnusedGlobalVariable" displayName="Unused global variables" groupName="Perl5"
                         enabledByDefault="true" level="WARNING"
                         implementationClass="com.perl5.lang.perl.idea.inspections.PerlVariableGlobalUnusedInspection"/>
        <localInspection language="Perl5"
                         shortName="UnusedTypeGlob" displayName="Unused typeglob alias" groupName="Perl5"
                         enabledByDefault="true" level="WARNING"
                         implementationClass="com.perl5.lang.perl.idea.inspections.PerlUnusedTypeGlobInspection"/>

        <localInspection language="Perl5"
                         shortName="UseStrict" displayName="Pragma usage: strict" groupName="Perl5"
                         enabledByDefault="true" level="WARNING"
                         implementationClass="com.perl5.lang.perl.idea.inspections.PerlUseStrictInspection"/>
        <localInspection language="Perl5"
                         shortName="UseWarnings" displayName="Pragma usage: warnings" groupName="Perl5"
                         enabledByDefault="true" level="WARNING"
                         implementationClass="com.perl5.lang.perl.idea.inspections.PerlUseWarningsInspection"/>

        <intentionAction>
            <className>com.perl5.lang.perl.idea.intentions.StringToHeredocConverter</className>
            <category>String converter</category>
            <descriptionDirectoryName>StringToHeredocConverter</descriptionDirectoryName>

        </intentionAction>


    </extensions>

    <application-components>
        <component>
            <implementation-class>com.perl5.lang.perl.idea.application.PerlParserExtensions</implementation-class>
        </component>
    </application-components>

    <project-components>
        <!-- Add your project components here -->
        <component>
            <implementation-class>com.perl5.lang.perl.idea.project.Perl5ProjectComponent</implementation-class>
        </component>
        <component>
            <implementation-class>com.perl5.lang.perl.idea.project.PerlMicroIdeSettingsLoader</implementation-class>
        </component>
        <component>
            <implementation-class>com.perl5.lang.mason2.idea.components.MasonProjectComponent</implementation-class>
        </component>
    </project-components>

    <actions>
        <group class="com.perl5.lang.perl.idea.actions.groups.PerlFileActionsGroup" id="Perl5NewFile"
               text="Perl5 File Actions" description="Create Perl5 File" icon="/icons/perl5.png">

            <action id="Perl5.NewPerlPackage" class="com.perl5.lang.perl.idea.actions.CreatePerlPackageFileAction"
                    text="Perl5 Package" description="Create Perl5 Package">
            </action>

            <action id="Perl5.NewPerlScript" class="com.perl5.lang.perl.idea.actions.CreatePerlScriptFileAction"
                    text="Perl5 Script" description="Create Perl5 Script">
            </action>

            <action id="Perl5.NewPerlEmbedded" class="com.perl5.lang.perl.idea.actions.CreateEmbeddedPerlFileAction"
                    text="Embedded Perl5 File" description="Create Embedded Perl5 file">
            </action>

            <action id="Perl5.NewPerlMojolicious"
                    class="com.perl5.lang.perl.idea.actions.CreateMojoliciousTemplateAction"
                    text="Mojolicious Template File" description="Create Mojolicious Template File">
            </action>

            <action id="Perl5.NewPerlTest" class="com.perl5.lang.perl.idea.actions.CreatePerlTestFileAction"
                    text="Perl5 Test" description="Create Perl5 Test">
            </action>


            <separator/>

            <add-to-group group-id="NewGroup" anchor="first"/>
        </group>


        <action class="com.perl5.lang.perl.idea.generation.GeneratePerlConstructorAction" id="Perl5NewConstructor"
                text="Generate Constructor" description="Generate class constructor">
            <add-to-group group-id="GenerateGroup" anchor="first"/>
        </action>
        <action class="com.perl5.lang.perl.idea.generation.GeneratePerlGetterAction" id="Perl5NewGetter"
                text="Generate Getters" description="Generate class getters">
            <add-to-group group-id="GenerateGroup" anchor="after" relative-to-action="Perl5NewConstructor"/>
        </action>
        <action class="com.perl5.lang.perl.idea.generation.GeneratePerlSetterAction" id="Perl5NewSetter"
                text="Generate Setters" description="Generate class setters">
            <add-to-group group-id="GenerateGroup" anchor="after" relative-to-action="Perl5NewGetter"/>
        </action>
        <action class="com.perl5.lang.perl.idea.generation.GeneratePerlGetterSetterAction" id="Perl5NewGetterSetter"
                text="Generate Getters and Setters" description="Generate class getters and setters">
            <add-to-group group-id="GenerateGroup" anchor="after" relative-to-action="Perl5NewSetter"/>
        </action>

    </actions>

</idea-plugin>